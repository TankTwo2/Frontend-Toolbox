(()=>{"use strict";chrome.runtime.onInstalled.addListener(()=>{console.log("Frontend Toolbox extension installed"),chrome.storage.local.set({toolboxSettings:{autoEnable:!1,defaultTools:["imageDownloader","styleInspector","videoRecorder"],theme:"light"},recordings:[],savedStyles:[]}),chrome.contextMenus.create({id:"analyze-element",title:"Frontend Toolbox로 스타일 분석",contexts:["all"]})}),chrome.runtime.onMessage.addListener((e,o,t)=>{switch(e.action){case"getSettings":return chrome.storage.local.get(["toolboxSettings"],e=>{t(e.toolboxSettings||{})}),!0;case"saveSettings":return chrome.storage.local.set({toolboxSettings:e.settings},()=>{t({success:!0})}),!0;case"styleExtracted":console.log("Style extracted:",e.data),t({success:!0});break;case"recordingStarted":console.log("Recording started:",e.data),t({success:!0});break;case"recordingCompleted":console.log("Recording completed:",e.data),t({success:!0});break;default:t({error:"Unknown action"})}}),chrome.tabs.onUpdated.addListener((e,o,t)=>{"complete"===o.status&&t.url&&console.log(`Tab updated: ${t.url}`)}),chrome.contextMenus.onClicked.addListener((e,o)=>{"analyze-element"===e.menuItemId&&o?.id&&chrome.tabs.sendMessage(o.id,{action:"startStyleInspector"})}),chrome.runtime.onMessage.addListener((e,o,t)=>{if("download"===e.action)return chrome.downloads.download({url:e.url,filename:e.filename,conflictAction:"uniquify"},e=>{chrome.runtime.lastError?(console.error("Download error:",chrome.runtime.lastError),t({error:chrome.runtime.lastError.message})):t(e?{success:!0,downloadId:e}:{error:"Download failed"})}),!0})})();